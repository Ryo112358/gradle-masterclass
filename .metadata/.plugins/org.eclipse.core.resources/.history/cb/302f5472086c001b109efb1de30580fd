import java.text.SimpleDateFormat;

defaultTasks 'hello';

SimpleDateFormat sdf = new SimpleDateFormat("MMM dd, yyyy 'T'HH:mm:ss");
sdf.setTimeZone(TimeZone.getTimeZone("EST"));

task ('hello').doLast {
	println "Gradle says Hello! ^.^ " + sdf.format(new Date());
};

helloGradle();

void helloGradle() {
	println "Hello Gradle!";
	def heya = "Heya!";	// Automatically returned
}

int multiplyBy2(int i) {
	i*2;	// return is optional, last line in method is automatically returned
}

println multiplyBy2(21);

// --- Closures ------------------------

def echoIt = { param1 ->	// Add more params via comma separation, e.g. p1, p2, p3
	println param1;
	"Echooooo!!!";			// Last line in closure is automatically returned
}

println echoIt("I'm in a closure...");

def implicitEcho = { println it };	// Closures take an implicit parameter called 'it'

implicitEcho("Closureeee!");

def multiplyBy5(closure) {
	closure() * 5
}

println multiplyBy5 {3};	// Parentheses are optional for groovy method calls

def multiplyClosureBy(int factor, Closure closure) {	// Closure should be passed in last
	closure() * factor;
}

println multiplyClosureBy(3, {17});
multiplyClosureBy 3, {11};	// Not printed, but acceptable syntax

def i = multiplyBy5 {
	def y = 2.4;
	y * 2;
}

println i;

[3,6,9,12].each {
	println it;
}

class Person {
	String theName;
	Integer theAge;
	
	Person(name, age) {
		this.name = name;
		this.age = age;
	}
	
	def executeInside(Closure c) {
		c.delegate = this;
		c();
	}
}

def aang = new Person("Aang", 113);

aang.executeInside { println theName };